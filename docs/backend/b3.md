---
outline: deep
---

# Робота з базами даних MySQL

## Вступ до MySQL
MySQL - це відкрита реляційна система управління базами даних (RDBMS), що використовує мову структурованих запитів SQL для маніпулювання даними. Ось деякі ключові аспекти MySQL:

### Основні характеристики MySQL:

1. **Реляційна модель даних**: MySQL використовує таблиці для зберігання даних зі структурою, яка визначається схемою бази даних.

2. **Мова SQL**: Як реляційна база даних, MySQL підтримує стандартну мову запитів SQL (Structured Query Language) для створення, читання, оновлення та видалення даних.

3. **Транзакції**: MySQL підтримує транзакції для забезпечення консистентності та надійності даних.

4. **Індекси**: Для покращення швидкодії запитів MySQL використовує індекси, які прискорюють доступ до даних.

5. **Безпека**: MySQL надає можливості для керування доступом до даних і захисту бази даних від несанкціонованого доступу.

6. **Реплікація і шардування**: MySQL підтримує реплікацію (відображення) даних для забезпечення надійності і масштабованості.

7. **Інтеграція**: Можливості MySQL дозволяють інтегрувати базу даних з різними мовами програмування та іншими системами.

Це основні аспекти MySQL, які роблять його потужним інструментом для зберігання і управління даними в різних типах застосунків.

### Огляд MySQL як реляційної бази даних
**MySQL** — це одна з найпопулярніших реляційних баз даних (РБД), яка використовується для зберігання, організації та управління інформацією. Давайте розглянемо основні аспекти MySQL:

1. **Структура РБД**:
   - Реляційні таблиці: дані організовані у вигляді таблиць з рядками та стовпцями.
   - Кожен рядок представляє окремий запис, а кожен стовпець містить атрибути (наприклад, ім'я, прізвище, зарплату тощо).

2. **Основні поняття**:
   - **Кортеж (запис)**: кожен рядок у таблиці.
   - **Атрибут (стовпець)**: характеристика об'єкта, що описується в таблиці.
   - **Основний ключ (Primary Key)**: унікальний ідентифікатор кожного рядка.
   - **Зовнішній ключ (Foreign Key)**: створює зв'язки між таблицями.

3. **Переваги MySQL**:
   - Широко використовується.
   - Ефективний та надійний.
   - Підтримує SQL-запити.


### Встановлення та налаштування MySQL

1. **Завантажте MySQL Installer**:
   - Перейдіть на [офіційний веб-сайт MySQL](https://dev.mysql.com/downloads/installer/) та завантажте MySQL Installer для Windows.
   - Виконайте інсталятор та слідуйте інструкціям для встановлення MySQL.

2. **Налаштування MySQL**:
   - Під час встановлення вас попросять налаштувати MySQL. Ось деякі важливі параметри:
     - **Пароль для кореневого користувача**: Встановіть надійний пароль для кореневого користувача.
     - **Порт**: За замовчуванням MySQL працює на порту 3306.
     - **Ім'я служби**: Виберіть ім'я служби MySQL (наприклад, \"MySQL80\").

3. **Запустіть службу MySQL**:
   - Після встановлення запустіть службу MySQL за допомогою наступної команди:
     - Відкрийте командний рядок або PowerShell в режимі адміністратора.
     - Виконайте: `net start MySQL80`

4. **Відкрийте MySQL Shell**:
   - Відкрийте MySQL Shell за допомогою наступної команди:
     - Виконайте: `mysql -u root -p`
     - Введіть пароль кореневого користувача, коли вас попросять.

5. **Створіть базу даних**:
   - В середині MySQL Shell створіть нову базу даних:
     - Виконайте: `CREATE DATABASE mydb;`

6. **Створіть таблицю**:
   - Створіть прикладову таблицю в базі даних \"mydb\":
     - Виконайте:
     ```sql
     CREATE TABLE mytable (
         id INT AUTO_INCREMENT PRIMARY KEY,
         name VARCHAR(255),
         age INT
     );
     ```

## Основні концепції MySQL

### Створення бази даних та таблиць

1. **Створіть базу даних**:
   - Відкрийте MySQL Shell або командний рядок.
   - Виконайте наступну команду, щоб створити нову базу даних (наприклад, "mydb"):
     ```sql
     CREATE DATABASE mydb;
     ```

2. **Створіть таблицю**:
   - В середині бази даних "mydb" створіть таблицю (наприклад, "mytable") зі стовпцями:
     - "id" (ціле число, автоінкрементний первинний ключ)
     - "name" (рядок, наприклад, VARCHAR(255))
     - "age" (ціле число)
   - Виконайте наступний SQL-запит:
     ```sql
     CREATE TABLE mytable (
         id INT AUTO_INCREMENT PRIMARY KEY,
         name VARCHAR(255),
         age INT
     );
     ```

3. **Вставте дані**:
   - Додайте деякі записи в таблицю:
     ```sql
     INSERT INTO mytable (name, age) VALUES
         ('John', 30),
         ('Alice', 25),
         ('Bob', 22);
     ```

4. **Виберіть дані з таблиці**:
   - Виконайте запит, щоб отримати всі записи з таблиці:
     ```sql
     SELECT * FROM mytable;
     ```

### Створення, читання, оновлення та видалення даних (CRUD операції)

1. **Читання (READ)**:
   - Виберіть всі записи з таблиці "mytable":
     ```sql
     SELECT * FROM mytable;
     ```

2. **Оновлення (UPDATE)**:
   - Змініть вік для користувача з іменем "John" на 35 років:
     ```sql
     UPDATE mytable SET age = 35 WHERE name = 'John';
     ```

3. **Видалення (DELETE)**:
   - Видаліть користувача з іменем "Bob":
     ```sql
     DELETE FROM mytable WHERE name = 'Bob';
     ```


### Використання індексів для оптимізації запитів
Індекси в MySQL є потужним інструментом для оптимізації запитів до бази даних. Вони дозволяють прискорити пошук і зменшити навантаження на сервер. Ось деякі важливі моменти щодо використання індексів:

1. **Типи індексів**:
   - **PRIMARY KEY**: Це унікальний індекс, який визначає первинний ключ таблиці. Він автоматично створюється для первинного ключа.
   - **UNIQUE INDEX**: Гарантує унікальність значень у стовпці або групі стовпців.
   - **INDEX**: Звичайний індекс для прискорення пошуку.
   - **FULLTEXT INDEX**: Використовується для повнотекстового пошуку.

2. **Правильний вибір стовпців для індексування**:
   - Індексуйте стовпці, які часто використовуються в WHERE, JOIN, ORDER BY або GROUP BY запитах.
   - Уникайте індексування великих текстових або BLOB-полів.

3. **Запити та оптимізація**:
   - Використовуйте `EXPLAIN` для аналізу запитів та перевірки використання індексів.
   - Зберігайте індекси оновленими, оскільки вони можуть розбалансуватися під час вставки, оновлення або видалення даних.

4. **Приклади**:
   - Створення індексу:
     ```sql
     CREATE INDEX idx_name ON mytable (name);
     ```
   - Використання індексу в запиті:
     ```sql
     SELECT * FROM mytable WHERE name = 'John';
     ```

Не забудьте, що надмірне індексування може призвести до збільшення розміру бази даних та зниження продуктивності при вставці/оновленні даних. 

## Робота з MySQL через Node.js

### Підключення до MySQL з використанням Node.js
Для підключення до бази даних MySQL з використанням Node.js ви можете використовувати пакет `mysql`. Ось кілька кроків:

1. **Встановлення пакету `mysql`**:
   - Відкрийте командний рядок або термінал.
   - Виконайте команду для встановлення пакету `mysql`:
     ```
     npm install mysql
     ```

2. **Підключення до бази даних MySQL**:
   - Створіть файл для підключення (наприклад, `connect.js`) у вашому проекті.
   - Імпортуйте модуль `mysql` у цьому файлі:
     ```javascript
     const mysql = require('mysql');
     ```

3. **Створіть з'єднання з MySQL сервером**:
   - Використовуйте параметри підключення з файлу `.env` (який містить дані про хост, порт, користувача, пароль та назву бази даних):
     ```javascript
     const connection = mysql.createConnection({
         host: process.env.DB_HOST,
         port: process.env.DB_PORT,
         user: process.env.DB_USER,
         password: process.env.DB_PASSWORD,
         database: process.env.DB_NAME,
     });
     ```

4. **Встановіть з'єднання з сервером MySQL**:
   - Викликайте метод `connect()` на об'єкті `connection`, щоб підключитися до сервера:
     ```javascript
     connection.connect((err) => {
         if (err) return console.error(err.message);
         console.log('Connected to the MySQL server.');
     });
     ```

5. **Запустіть програму**:
   - Виконайте файл `connect.js`:
     ```
     node --env-file .env connect.js
     ```
   - Ви повинні побачити повідомлення "Connected to the MySQL server."


### Виконання SQL запитів з Node.js
Для виконання SQL запитів з Node.js із використанням бази даних MySQL, ви можете використовувати пакет `mysql`. Ось кілька кроків, які вам потрібно виконати:

1. **Встановлення пакету `mysql`**:
   - Спочатку створіть папку для вашого проекту (наприклад, `my-mysql-app`) і перейдіть в неї через термінал або командний рядок:
     ```
     mkdir my-mysql-app
     cd my-mysql-app
     ```
   - Ініціалізуйте проект та створіть файл `package.json`:
     ```
     npm init -y
     ```
   - Встановіть пакет `mysql`:
     ```
     npm install mysql
     ```

2. **Підключення до бази даних MySQL**:
   - Створіть файл `app.js` (або інше ім'я за вашим вибором) для вашого Node.js додатку.
   - Використовуйте модуль `mysql` для підключення до бази даних. Ось приклад коду:
     ```javascript
     const mysql = require('mysql');

     const connection = mysql.createConnection({
         host: 'localhost', // Адреса сервера MySQL
         user: 'your_username', // Ім'я користувача MySQL
         password: 'your_password', // Пароль користувача MySQL
         database: 'your_database', // Назва бази даних MySQL
     });

     connection.connect((err) => {
         if (err) {
             console.error('Помилка підключення до MySQL:', err);
             return;
         }
         console.log('Підключено до MySQL!');
     });
     ```

3. **Виконання SQL запитів**:
   - Використовуйте методи `query` або `execute` для виконання SQL запитів. Наприклад:
     ```javascript
     connection.query('SELECT * FROM users', (err, results) => {
         if (err) {
             console.error('Помилка виконання запиту:', err);
             return;
         }
         console.log('Результати запиту:', results);
     });
     ```

4. **Закриття з'єднання**:
   - Не забудьте закрити з'єднання після виконання запитів:
     ```javascript
     connection.end();
     ```

5. **Тестування**:
   - Запустіть ваш Node.js додаток:
     ```
     node app.js
     ```


### Інтеграція MySQL з ORM (Object-Relational Mapping) бібліотеками
Існують декілька відомих ORM-бібліотек для інтеграції з MySQL у Python та Node.js. Ось кілька з них:

1. **Sequelize (Node.js)**:
   - Sequelize є потужним ORM для TypeScript та Node.js, який підтримує Oracle, Postgres, MySQL, MariaDB, SQLite та SQL Server.
   - Він має вбудовану підтримку транзакцій, відносин, лінивого та енергійного завантаження, реплікації читання та багато іншого.
   - Встановлення: `npm install sequelize sqlite3` або `yarn add sequelize sqlite3`.
   - [Документація Sequelize](https://sequelize.org/)

2. **SQLAlchemy (Python)**:
   - SQLAlchemy - це потужний Python ORM, який підтримує різні бази даних, включаючи MySQL.
   - Він дозволяє зручно працювати з базами даних, використовуючи Python-код замість SQL-запитів.
   - [Документація SQLAlchemy](https://www.sqlalchemy.org/)

3. **Django ORM (Python)**:
   - Django ORM - це ORM, вбудований у фреймворк Django.
   - Він дозволяє зручно взаємодіяти з базою даних, використовуючи Python-код.
   - [Документація Django ORM](https://docs.djangoproject.com/en/4.1/topics/db/models/)

4. **Peewee (Python)**:
   - Peewee - це легкий і простий в використанні Python ORM.
   - Він підтримує MySQL та інші бази даних.
   - [Документація Peewee](http://docs.peewee-orm.com/en/latest/)
